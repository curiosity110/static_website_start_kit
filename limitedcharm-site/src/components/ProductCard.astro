---
import type { Lang } from '../i18n/config';
import { Image } from '@astrojs/image/components';

interface Props {
  title?: string;
  description?: string;
  image?: string;
  short?: string;
  price?: string;
  price_old?: string;
  slug?: string;
  lang: Lang;
}

const {
  title = 'Untitled Product',
  description,
  image,
  short = 'No description available.',
  price = 'N/A',
  price_old,
  slug = '',
  lang
} = Astro.props as Props;

const imageSrc = image ?? '/assets/fallback1.png';
---
<article class="border p-4 flex flex-col">
  <Image src={imageSrc} alt={title} width={300} height={300} formats={["avif", "webp", "png"]} sizes="(max-width: 768px) 100vw, 300px" loading="lazy" class="mb-4 rounded" />
  <h3 class="text-xl font-semibold mb-2">{title}</h3>
  {description && <p class="mb-2">{description}</p>}
  <p class="mb-4">{short}</p>
  <div class="mt-auto">
    <p class="text-lg font-bold">
      {price_old && <span class="line-through mr-2 text-gray-500">{price_old}</span>}
      <span>{price}</span>
    </p>
    <div class="flex gap-2 mt-4">
      <a href="#contact" class="px-4 py-2 bg-green-600 text-white rounded">Order</a>
      <a href={`/${lang}/products/${slug}`} class="px-4 py-2 border rounded">More info</a>
    </div>
  </div>
</article>
